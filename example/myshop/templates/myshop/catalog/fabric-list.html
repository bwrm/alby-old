{% load i18n static sekizai_tags sass_tags %}
{% addtoblock "js" %}<script src="{% static 'node_modules/angular-ui-bootstrap/ui-bootstrap-tpls.min.js' %}"></script>{% endaddtoblock %}
{% add_data "ng-requires" "ui.bootstrap" %}

{% addtoblock "js" %}<script src="{% static 'shop/js/utils.js' %}" type="text/javascript"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script src="{% static 'shop/js/catalog.js' %}" type="text/javascript"></script>{% endaddtoblock %}
{% add_data "ng-requires" "django.shop.catalog" %}
{% block catalog-list %}
	{% addtoblock "css" %}<link href="{% sass_src 'shop/css/product-list.scss' %}" rel="stylesheet" type="text/css" />{% endaddtoblock %}
	<style>
		.fabric-plate{
			border: 1px solid #ddd;
			border-radius: 4px;
			padding: 10px;
			min-height: 100px;
		}
		.but{
			width: 100%;
		}
		.clicked {
		 	background-color: #ffffff !important;
			color: #286090 !important;
			font-weight: 700;
			border: 2px solid #286090;
			border-radius: 4px;
			width: 100%;
		}
		.fabric-list-item {
			padding-top: 20px;
			height: 100%;
		}
		.shop-list-item figure {
			border: 1px solid #ddd;
			border-radius: 4px;
			padding: 10px;
			min-height: 245px;
			max-height: 250px;

		.fabric-list-item figure h4
		{
			min-height: 10px;
		}
	</style>
	<shop-catalog-list infinite-scroll="{{ infinite_scroll|yesno:'true,false' }}">
		<div ng-if="catalog.count===undefined">
			<div class="row">
				<div class="fabric-plate col-xs-12 col-sm-12 col-md-12 col-lg-12">
					<div ng-if="!cartItems">
						<div data-ng-init="loadSamplesCart('{% url 'shop:cart-list' %}')" >
							<div ng-repeat="item in cartItems" class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
								<a  ng-click="removeFromCart(item)">
									<!--<div ng-bind="item.summary.product_name"></div>-->
								<div ng-bind-html="item.summary.media"></div>
								</a>
							</div>
							<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
								<a  ng-click="removeFromCart(item)">
									<button class="btn btn-sm">{% trans "Checkout>>" %}</button>
								</a>
							</div>
						</div>
					</div>
					<div ng-if="cartItems">
						<div ng-repeat="item in cartItems" class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
								<a  ng-click="removeFromCart(item)">
									<!--<div ng-bind="item.summary.product_name"></div>-->
								<div ng-bind-html="item.summary.media"></div>
								</a>
						</div>
							<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2">
								<a  ng-click="removeFromCart(item)">
{#	TODO: change hard coded URL#}
									<a href="/korzina/oformlenie-zakaza/"><button class="btn btn-sm">{% trans "Checkout>>" %}</button></a>
								</a>
							</div>
					</div>
				</div>
			</div>
			<div class="row">
				{% for product in data.results %}
					{% include "myshop/catalog/fabric-list-item.html" with ng=0 %}
				{% endfor %}
			</div>
		</div>
		<div ng-cloak ng-if="catalog.count>=0">
			{% include "myshop/catalog/fabric-list-item.html" with ng=1 %}
		</div>


	</shop-catalog-list>

{% endblock catalog-list %}

{% block paginator %}
	{% include "shop/catalog/paginator.html" %}
{% endblock %}


